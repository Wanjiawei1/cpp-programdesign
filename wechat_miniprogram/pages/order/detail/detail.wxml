<!--pages/order/detail/detail.wxml-->
<view class="detail-container">
  <!-- è®¢å•çŠ¶æ€ -->
  <view class="status-section">
    <view class="status-icon">
      <text class="icon">ğŸ“¦</text>
    </view>
    <view class="status-info">
      <text class="status-text">{{orderDetail.statusText}}</text>
      <text class="status-desc" wx:if="{{orderDetail.status === 4}}">éª‘æ‰‹æ­£åœ¨é…é€ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…</text>
      <text class="status-desc" wx:if="{{orderDetail.status === 5}}">è®¢å•å·²å®Œæˆï¼Œæ„Ÿè°¢æ‚¨çš„ä½¿ç”¨</text>
    </view>
  </view>

  <!-- é…é€ä¿¡æ¯ -->
  <view class="delivery-section" wx:if="{{orderDetail.status >= 3}}">
    <view class="section-title">é…é€ä¿¡æ¯</view>
    <view class="delivery-info">
      <view class="info-row">
        <text class="label">æ”¶è´§åœ°å€ï¼š</text>
        <text class="value">{{orderDetail.address}}</text>
      </view>
      <view class="info-row">
        <text class="label">è”ç³»ç”µè¯ï¼š</text>
        <text class="value">{{orderDetail.phone}}</text>
      </view>
      <view class="info-row">
        <text class="label">æ”¶è´§äººï¼š</text>
        <text class="value">{{orderDetail.consignee}}</text>
      </view>
    </view>
  </view>

  <!-- å•†å“ä¿¡æ¯ -->
  <view class="dish-section">
    <view class="section-title">å•†å“ä¿¡æ¯</view>
    <view class="dish-list">
      <view class="dish-item" wx:for="{{orderDetail.orderDetailList}}" wx:key="id">
        <image class="dish-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-flavor" wx:if="{{item.dishFlavor}}">{{item.dishFlavor}}</text>
          <view class="dish-bottom">
            <text class="dish-price">Â¥{{item.amount}}</text>
            <text class="dish-quantity">x{{item.number}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- è®¢å•ä¿¡æ¯ -->
  <view class="order-section">
    <view class="section-title">è®¢å•ä¿¡æ¯</view>
    <view class="order-info">
      <view class="info-row">
        <text class="label">è®¢å•å·ï¼š</text>
        <text class="value">{{orderDetail.number}}</text>
      </view>
      <view class="info-row">
        <text class="label">ä¸‹å•æ—¶é—´ï¼š</text>
        <text class="value">{{orderDetail.orderTime}}</text>
      </view>
      <view class="info-row" wx:if="{{orderDetail.checkoutTime}}">
        <text class="label">ç»“è´¦æ—¶é—´ï¼š</text>
        <text class="value">{{orderDetail.checkoutTime}}</text>
      </view>
      <view class="info-row">
        <text class="label">æ”¯ä»˜æ–¹å¼ï¼š</text>
        <text class="value">{{orderDetail.payMethod === 1 ? 'å¾®ä¿¡æ”¯ä»˜' : 'æ”¯ä»˜å®'}}</text>
      </view>
    </view>
  </view>

  <!-- è´¹ç”¨æ˜ç»† -->
  <view class="price-section">
    <view class="section-title">è´¹ç”¨æ˜ç»†</view>
    <view class="price-info">
      <view class="price-row">
        <text class="label">å•†å“æ€»é¢</text>
        <text class="value">{{orderAmountText}}</text>
      </view>
      <view class="price-row">
        <text class="label">é…é€è´¹</text>
        <text class="value">Â¥3.00</text>
      </view>
      <view class="price-row total">
        <text class="label">å®ä»˜é‡‘é¢</text>
        <text class="value">Â¥{{orderDetail.amount}}</text>
      </view>
    </view>
  </view>

  <!-- è®¢å•æ“ä½œ -->
  <view class="action-section">
    <button 
      class="action-btn cancel"
      wx:if="{{orderDetail.status === 1}}"
      bindtap="cancelOrder"
    >
      å–æ¶ˆè®¢å•
    </button>
    <button 
      class="action-btn pay"
      wx:if="{{orderDetail.status === 1}}"
      bindtap="payOrder"
    >
      å»æ”¯ä»˜
    </button>
    <button 
      class="action-btn reminder"
      wx:if="{{orderDetail.status === 3}}"
      bindtap="reminderOrder"
    >
      å‚¬å•
    </button>
    <button 
      class="action-btn repeat"
      wx:if="{{orderDetail.status === 5 || orderDetail.status === 6}}"
      bindtap="repeatOrder"
    >
      å†æ¥ä¸€å•
    </button>
  </view>
</view>
