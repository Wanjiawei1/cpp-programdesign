<!--pages/order/confirm/confirm.wxml-->
<view class="confirm-container">
  <!-- æ”¶è´§åœ°å€ -->
  <view class="address-section" bindtap="selectAddress">
    <view class="address-content" wx:if="{{selectedAddress}}">
      <view class="address-info">
        <text class="name">{{selectedAddress.consignee}}</text>
        <text class="phone">{{selectedAddress.phone}}</text>
      </view>
      <text class="address">{{selectedAddress.provinceName}}{{selectedAddress.cityName}}{{selectedAddress.districtName}}{{selectedAddress.detail}}</text>
    </view>
    <view class="no-address" wx:else="{{!selectedAddress}}">
      <text class="tip-text">è¯·é€‰æ‹©æ”¶è´§åœ°å€</text>
    </view>
    <text class="arrow">></text>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <view class="dish-section">
    <view class="section-header">
      <text class="shop-name">å·¥å¤§è®¢é¤</text>
    </view>
    <view class="dish-list">
      <view class="dish-item" wx:for="{{cartItems}}" wx:key="id">
        <image class="dish-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-flavor" wx:if="{{item.dishFlavor}}">{{item.dishFlavor}}</text>
          <view class="dish-bottom">
            <text class="dish-price">Â¥{{item.totalPrice}}</text>
            <text class="dish-quantity">x{{item.number}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- é…é€æ—¶é—´ -->
  <view class="delivery-section">
    <view class="delivery-item">
      <text class="label">é…é€æ—¶é—´</text>
      <text class="value">å°½å¿«é€è¾¾ (çº¦30åˆ†é’Ÿ)</text>
    </view>
  </view>

  <!-- è®¢å•å¤‡æ³¨ -->
  <view class="remark-section">
    <view class="remark-item">
      <text class="label">è®¢å•å¤‡æ³¨</text>
      <input 
        class="remark-input" 
        placeholder="å¯å‘ŠçŸ¥å•†å®¶æ‚¨çš„ç‰¹æ®Šéœ€æ±‚"
        value="{{remark}}"
        bindinput="onRemarkInput"
      />
    </view>
  </view>

  <!-- è´¹ç”¨æ˜ç»† -->
  <view class="price-section">
    <view class="price-row">
      <text class="label">å•†å“æ€»é¢</text>
      <text class="value">{{totalAmountText}}</text>
    </view>
    <view class="price-row">
      <text class="label">é…é€è´¹</text>
      <text class="value">Â¥3.00</text>
    </view>
    <view class="price-row total">
      <text class="label">å®ä»˜é‡‘é¢</text>
      <text class="value">{{finalAmountText}}</text>
    </view>
  </view>

  <!-- æ”¯ä»˜æ–¹å¼ -->
  <view class="payment-section">
    <view class="payment-item" bindtap="selectPayment">
      <text class="label">æ”¯ä»˜æ–¹å¼</text>
      <view class="payment-info">
        <text class="payment-icon">ğŸ’³</text>
        <text class="payment-name">å¾®ä¿¡æ”¯ä»˜</text>
        <text class="arrow">></text>
      </view>
    </view>
  </view>

  <!-- æäº¤è®¢å• -->
  <view class="submit-section">
    <view class="price-info">
      <text class="total-text">å®ä»˜: {{finalAmountText}}</text>
    </view>
    <button 
      class="submit-btn {{!selectedAddress ? 'disabled' : ''}}" 
      bindtap="submitOrder"
    >
      æäº¤è®¢å•
    </button>
  </view>
</view>
