<!--pages/profile/profile.wxml-->
<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¤´éƒ¨ -->
  <view class="user-header">
    <view class="header-bg"></view>
    <view class="user-info">
      <view class="avatar-container">
        <image class="avatar" src="{{userInfo.avatarUrl || '/static/R-C.jpg'}}" mode="aspectFill"></image>
        <view class="avatar-border"></view>
      </view>
      <view class="user-details">
        <view class="user-name">
          <text class="name">{{userInfo.nickName || 'ç”¨æˆ·'}}</text>
          <view class="gender-icon" wx:if="{{userInfo.gender === 1}}">â™‚</view>
          <view class="gender-icon female" wx:else>â™€</view>
        </view>
        <view class="user-phone">
          <text class="phone">{{userInfo.phone || 'æœªç»‘å®šæ‰‹æœº'}}</text>
        </view>
        <view class="user-level">
          <text class="level-text">VIPä¼šå‘˜</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä¸»è¦å†…å®¹ -->
  <scroll-view class="content-scroll" scroll-y="true">
    <!-- åŠŸèƒ½èœå• -->
    <view class="menu-section">
      <view class="menu-card">
        <view class="menu-item" bindtap="goToAddress">
          <view class="menu-icon address-icon">ğŸ“</view>
          <text class="menu-text">åœ°å€ç®¡ç†</text>
          <view class="menu-arrow">â€º</view>
        </view>
        <view class="menu-divider"></view>
        <view class="menu-item" bindtap="goToOrders">
          <view class="menu-icon order-icon">ğŸ“‹</view>
          <text class="menu-text">å†å²è®¢å•</text>
          <view class="menu-arrow">â€º</view>
        </view>
        <view class="menu-divider"></view>
        <view class="menu-item" bindtap="contactService">
          <view class="menu-icon service-icon">ğŸ’¬</view>
          <text class="menu-text">è”ç³»å®¢æœ</text>
          <view class="menu-arrow">â€º</view>
        </view>
      </view>
    </view>

    <!-- æœ€è¿‘è®¢å• -->
    <view class="orders-section" wx:if="{{recentOrders && recentOrders.length > 0}}">
      <view class="section-title">
        <text class="title-text">æœ€è¿‘è®¢å•</text>
        <view class="title-line"></view>
      </view>
      
      <view class="orders-list">
        <view class="order-card" wx:for="{{recentOrders}}" wx:key="id">
          <view class="order-header">
            <text class="order-time">{{item.orderTime}}</text>
            <view class="order-status {{item.statusClass}}">{{item.statusText}}</view>
          </view>
          
          <view class="order-items">
            <view class="order-item" wx:for="{{item.orderDetails}}" wx:for-item="detail" wx:key="id">
              <text class="item-name">{{detail.name}}</text>
              <text class="item-quantity">x{{detail.number}}</text>
            </view>
          </view>
          
          <view class="order-footer">
            <view class="order-total">
              <text class="total-text">å…±{{item.totalNumber}}ä»¶å•†å“ï¼Œå®ä»˜</text>
              <text class="total-amount">ï¿¥{{item.amount}}</text>
            </view>
            <view class="order-actions" wx:if="{{item.status === 5}}">
              <button class="action-btn reorder-btn" bindtap="reorder" data-id="{{item.id}}">å†æ¥ä¸€å•</button>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- ç™»å½•/é€€å‡ºæŒ‰é’® -->
    <view class="action-section">
      <view class="action-btn {{userInfo ? 'logout-btn' : 'login-btn'}}" bindtap="{{userInfo ? 'logout' : 'goToLogin'}}">
        <text class="btn-text">{{userInfo ? 'é€€å‡ºç™»å½•' : 'ç«‹å³ç™»å½•'}}</text>
      </view>
    </view>
  </scroll-view>
</view>